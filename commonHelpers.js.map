{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst pixabayKey = '45258111-19b0afcb9384c7a2acd16a24f';\n\nconst DEFAULR_PER_PAGE = 15;\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\naxios.defaults.params = {};\naxios.defaults.params['key'] = pixabayKey;\n\nexport async function getImagesFromPixabay(query, page) {\n  let params = {\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    // safesearch: true,\n    per_page: DEFAULR_PER_PAGE,\n    page: page,\n    // key: pixabayKey,\n  };\n\n  return axios.get('/', {\n    params,\n  });\n}\n","export function render(images) {\n  let renderHtml = '';\n  images.forEach(image => {\n    renderHtml += `\n  <li class=\"gallery-item\">\n    <div class='gallery-item-wrap'>\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">  \n        <img src=\"${image.webformatURL}\" class=\"gallery-image\"  />\n      </a>\n      <div class=\"gallery-item-description\">\n          <div>\n            <h3>Likes</h3>\n            <p>${image.likes}</p>\n          </div>\n          <div>\n            <h3>Views</h3>\n            <p>${image.views}</p>\n          </div>\n          <div>\n            <h3>Comments</h3>\n            <p>${image.comments}</p>\n          </div>\n          <div>\n            <h3>Downloads</h3>\n            <p>${image.downloads}</p>\n          </div>\n        </ul\n    \n      </div>\n    </div>\n    </li>\n  `;\n  });\n  return renderHtml;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImagesFromPixabay } from './js/pixabay-api';\nimport { render } from './js/render-functions';\n\nconst loader = document.querySelector('.loader');\n\nlet gallery = document.querySelector('.gallery');\n\nlet searchInput = document.querySelector('.search');\nlet loadMoreButton = document.querySelector('#load-more-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet query = null;\nlet images = [];\n\nconst renderImages = async (query, page) => {\n  try {\n    loader.style.display = 'block';\n    const response = await getImagesFromPixabay(query, page);\n    const { data } = response;\n    const { totalHits, hits } = data;\n    images = [...images, ...hits];\n\n    if (images.length === 0) {\n      notifyError();\n      return;\n    }\n\n    searchInput.value = '';\n\n    gallery.innerHTML = render(images);\n\n    if (images.length >= totalHits) {\n      loadMoreButton.classList.add('load-more-button');\n      loadMoreButton.classList.remove('button-center');\n\n      notifyInfo(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      if (loadMoreButton.classList.contains('load-more-button')) {\n        loadMoreButton.classList.remove('load-more-button');\n        loadMoreButton.classList.add('button-center');\n      }\n    }\n\n    lightbox.refresh();\n  } catch (e) {\n    notifyError(e.message);\n    throw e;\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\ndocument.querySelector('#search-form').addEventListener('submit', async e => {\n  e.preventDefault();\n\n  query = searchInput.value;\n  images = [];\n\n  try {\n    await renderImages(query, page);\n  } catch (e) {\n    console.error(e);\n  }\n});\n\nloadMoreButton.addEventListener('click', async e => {\n  page++;\n  await renderImages(query, page);\n  const boundingClientRect = document\n    .querySelector('.gallery-item-wrap')\n    .getBoundingClientRect();\n\n  console.log(boundingClientRect);\n  const imgBlockWidth = boundingClientRect.width;\n\n  window.scrollBy({\n    top: imgBlockWidth * 2,\n    behavior: 'smooth',\n  });\n});\n\nconst notifyError = (\n  m = 'Sorry, there are no images matching your search query. Please try again!'\n) => {\n  iziToast.error({\n    message: m,\n    position: 'topRight',\n  });\n};\n\nconst notifyInfo = m => {\n  iziToast.info({\n    message: m,\n    position: 'topRight',\n  });\n};\n"],"names":["pixabayKey","DEFAULR_PER_PAGE","axios","getImagesFromPixabay","query","page","params","render","images","renderHtml","image","loader","gallery","searchInput","loadMoreButton","lightbox","SimpleLightbox","renderImages","response","data","totalHits","hits","notifyError","notifyInfo","e","boundingClientRect","imgBlockWidth","m","iziToast"],"mappings":"owBAEA,MAAMA,EAAa,qCAEbC,EAAmB,GAEzBC,EAAM,SAAS,QAAU,0BACzBA,EAAM,SAAS,OAAS,GACxBA,EAAM,SAAS,OAAO,IAASF,EAExB,eAAeG,EAAqBC,EAAOC,EAAM,CACtD,IAAIC,EAAS,CACX,EAAGF,EACH,WAAY,QACZ,YAAa,aAEb,SAAUH,EACV,KAAMI,CAEV,EAEE,OAAOH,EAAM,IAAI,IAAK,CACpB,OAAAI,CACJ,CAAG,CACH,CCxBO,SAASC,EAAOC,EAAQ,CAC7B,IAAIC,EAAa,GACjB,OAAAD,EAAO,QAAQE,GAAS,CACtBD,GAAc;AAAA;AAAA;AAAA,iBAGDC,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKrBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,iBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,iBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQhC,CAAG,EACMD,CACT,CCzBA,MAAME,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAc,SAAS,cAAc,SAAS,EAC9CC,EAAiB,SAAS,cAAc,mBAAmB,EAE/D,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,GAChB,CAAC,EAED,IAAIX,EAAO,EACPD,EAAQ,KACRI,EAAS,CAAA,EAEb,MAAMS,EAAe,MAAOb,EAAOC,IAAS,CAC1C,GAAI,CACFM,EAAO,MAAM,QAAU,QACvB,MAAMO,EAAW,MAAMf,EAAqBC,EAAOC,CAAI,EACjD,CAAE,KAAAc,CAAM,EAAGD,EACX,CAAE,UAAAE,EAAW,KAAAC,CAAM,EAAGF,EAG5B,GAFAX,EAAS,CAAC,GAAGA,EAAQ,GAAGa,CAAI,EAExBb,EAAO,SAAW,EAAG,CACvBc,IACA,MACD,CAEDT,EAAY,MAAQ,GAEpBD,EAAQ,UAAYL,EAAOC,CAAM,EAE7BA,EAAO,QAAUY,GACnBN,EAAe,UAAU,IAAI,kBAAkB,EAC/CA,EAAe,UAAU,OAAO,eAAe,EAE/CS,EAAW,4DAA4D,GAEnET,EAAe,UAAU,SAAS,kBAAkB,IACtDA,EAAe,UAAU,OAAO,kBAAkB,EAClDA,EAAe,UAAU,IAAI,eAAe,GAIhDC,EAAS,QAAO,CACjB,OAAQ,EAAG,CACV,MAAAO,EAAY,EAAE,OAAO,EACf,CACV,QAAY,CACRX,EAAO,MAAM,QAAU,MACxB,CACH,EAEA,SAAS,cAAc,cAAc,EAAE,iBAAiB,SAAU,MAAMa,GAAK,CAC3EA,EAAE,eAAc,EAEhBpB,EAAQS,EAAY,MACpBL,EAAS,CAAA,EAET,GAAI,CACF,MAAMS,EAAab,EAAOC,CAAI,CAC/B,OAAQmB,EAAG,CACV,QAAQ,MAAMA,CAAC,CAChB,CACH,CAAC,EAEDV,EAAe,iBAAiB,QAAS,MAAMU,GAAK,CAClDnB,IACA,MAAMY,EAAab,EAAOC,CAAI,EAC9B,MAAMoB,EAAqB,SACxB,cAAc,oBAAoB,EAClC,wBAEH,QAAQ,IAAIA,CAAkB,EAC9B,MAAMC,EAAgBD,EAAmB,MAEzC,OAAO,SAAS,CACd,IAAKC,EAAgB,EACrB,SAAU,QACd,CAAG,CACH,CAAC,EAED,MAAMJ,EAAc,CAClBK,EAAI,6EACD,CACHC,EAAS,MAAM,CACb,QAASD,EACT,SAAU,UACd,CAAG,CACH,EAEMJ,EAAaI,GAAK,CACtBC,EAAS,KAAK,CACZ,QAASD,EACT,SAAU,UACd,CAAG,CACH"}